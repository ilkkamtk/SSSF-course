<!DOCTYPE html>
<html lang="en-US">

<head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=device-width,maximum-scale=2">
    <meta name="description" content="Server Side Scripting Frameworks : Ile, Pate ja Olli">

    <link rel="stylesheet" type="text/css" media="screen" href="/assets/css/style.css?v=cac652a568b6b28ab6611d1d0378e9b2666f9784">

    <!-- Begin Jekyll SEO tag v2.3.0 -->
<title>Security continued | Server Side Scripting Frameworks</title>
<meta property="og:title" content="Security continued" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Ile, Pate ja Olli" />
<meta property="og:description" content="Ile, Pate ja Olli" />
<link rel="canonical" href="http://localhost:4000/Slides/Week4/W4-4-Helmet-CORS.html" />
<meta property="og:url" content="http://localhost:4000/Slides/Week4/W4-4-Helmet-CORS.html" />
<meta property="og:site_name" content="Server Side Scripting Frameworks" />
<script type="application/ld+json">
{"name":null,"description":"Ile, Pate ja Olli","author":null,"@type":"WebPage","url":"http://localhost:4000/Slides/Week4/W4-4-Helmet-CORS.html","publisher":null,"image":null,"headline":"Security continued","dateModified":null,"datePublished":null,"sameAs":null,"mainEntityOfPage":null,"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->

</head>

<body>

<!-- HEADER -->
<div id="header_wrap" class="outer">
    <header class="inner">
        <a id="forkme_banner" href="http://github.com/ilkkamtk/SSSF-course">View on GitHub</a>

        <h1 id="project_title">Server Side Scripting Frameworks</h1>
        <h2 id="project_tagline">Ile, Pate ja Olli</h2>

        
    </header>
</div>

<!-- NAVI -->


<!-- MAIN CONTENT -->
<div id="main_content_wrap" class="outer">

    <nav>
    <ul>
        
        <li>
            <a href="/assets/css/style.css"></a>
        </li>
        
        <li>
            <a href="/Slides/QA.html">Multiple local environments</a>
        </li>
        
        <li>
            <a href="/Slides/Week1/W1-1-Toolchain.html">Server-side scripting frameworks Toolchain</a>
        </li>
        
        <li>
            <a href="/Slides/Week1/W1-2-ECMAScript6-const-let-arrow_function.html"></a>
        </li>
        
        <li>
            <a href="/Slides/Week1/W1-4-ES6-promise-fetch.html"></a>
        </li>
        
        <li>
            <a href="/Slides/Week1/"></a>
        </li>
        
        <li>
            <a href="/Slides/Week2/W2-1-express.html">Express.js</a>
        </li>
        
        <li>
            <a href="/Slides/Week2/W2-1-npm.html">NPM</a>
        </li>
        
        <li>
            <a href="/Slides/Week2/W2-2-NoSQL-MongoDB-mongoose.html"></a>
        </li>
        
        <li>
            <a href="/Slides/Week2/W2-2-osx-install.html">MongoDB installation on OS X</a>
        </li>
        
        <li>
            <a href="/Slides/Week2/W2-4-Deploy_on_jelastic.html">express and mongoose on jelasitc</a>
        </li>
        
        <li>
            <a href="/Slides/Week3/W3-1-NoSQL-MongoDB-mongoose-continued.html">NoSQL MongoDB database and mongoose continued</a>
        </li>
        
        <li>
            <a href="/Slides/Week3/W3-2-Pug.html">PUG</a>
        </li>
        
        <li>
            <a href="/Slides/Week3/W3-4-https-passport.html">First steps into security</a>
        </li>
        
        <li>
            <a href="/Slides/Week4/W4-2-WebRTC.html">WebRTC</a>
        </li>
        
        <li>
            <a href="/Slides/Week4/W4-4-Helmet-CORS.html">Security continued</a>
        </li>
        
        <li>
            <a href="/">Server-Side Scripting Frameworks</a>
        </li>
        
    </ul>
</nav>
    <section id="main_content" class="inner">
        <h1 id="security-continued">Security continued</h1>

<h2 id="helmet">Helmet</h2>

<ul>
  <li><a href="https://www.npmjs.com/package/helmet">Helmet</a> secures Express.js application by modifying multiple headers.</li>
  <li>
    <p>“It’s not a silver bullet, but it can help!”</p>
  </li>
  <li>Installation:</li>
</ul>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm install helmet <span class="nt">--save</span>
</code></pre></div></div>

<ul>
  <li>Basic usage:</li>
</ul>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">helmet</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'helmet'</span><span class="p">);</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">helmet</span><span class="p">());</span>
</code></pre></div></div>

<ul>
  <li><code class="highlighter-rouge">helmet()</code> applies all default measures. To use only some, enable only those:</li>
</ul>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">helmet</span><span class="p">.</span><span class="nx">noCache</span><span class="p">())</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">helmet</span><span class="p">.</span><span class="nx">frameguard</span><span class="p">())</span>
</code></pre></div></div>

<ul>
  <li>or disable some:</li>
</ul>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">helmet</span><span class="p">({</span>
  <span class="na">frameguard</span><span class="p">:</span> <span class="kc">false</span>
<span class="p">}));</span>
</code></pre></div></div>

<hr />

<h3 id="exercise">Exercise</h3>

<p>Enable every default module of Helmet but the <code class="highlighter-rouge">X-Download-Options</code> header setting (<code class="highlighter-rouge">ieNoOpen</code>)</p>

<hr />

<h2 id="cors">CORS</h2>

<ul>
  <li>AJAX calls to other domains are forbidden by default by the <a href="https://en.wikipedia.org/wiki/Same-origin_policy">same-origin security policy</a></li>
  <li>Implemented by basically all browsers</li>
  <li>
    <p>Can be relaxed by enabling <code class="highlighter-rouge">Access-Control-*</code> headers</p>
  </li>
  <li><a href="https://upload.wikimedia.org/wikipedia/commons/thumb/c/ca/Flowchart_showing_Simple_and_Preflight_XHR.svg/2000px-Flowchart_showing_Simple_and_Preflight_XHR.svg.png">Flow</a></li>
</ul>

<h3 id="cors-with-expressjs">CORS with Express.js</h3>

<ul>
  <li>To enable Cross-Origin Resource Sharing (CORS), <a href="https://www.npmjs.com/package/cors">cors package</a> can be used</li>
  <li>
    <p>It supports enabling CORS for all routes, for single routes, and for pre-flight requests</p>
  </li>
  <li>Installation:</li>
</ul>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm install <span class="nt">--save</span> cors
</code></pre></div></div>

<ul>
  <li>Enable for all requests:</li>
</ul>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">cors</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'cors'</span><span class="p">);</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">cors</span><span class="p">());</span>
</code></pre></div></div>

<hr />

<h3 id="exercise-1">Exercise</h3>

<p>Implement CORS so that your application only allows CORS for POST on path <code class="highlighter-rouge">/cors-enabled</code>.</p>

<hr />

<h2 id="dependency-security">Dependency security</h2>

<ul>
  <li>“Security of your app is only as strong as the “weakest link” in your dependencies.”</li>
  <li>To check your dependencies for known vulnerabilities, <a href="https://www.npmjs.com/package/nsp">nsp</a> can be used</li>
</ul>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm i nsp <span class="nt">-g</span>
nsp check
</code></pre></div></div>

<hr />

<h3 id="exercise-2">Exercise</h3>
<p>Check your project for known vulnerabilities</p>

<hr />

<h1 id="use-tls">Use TLS</h1>

<ul>
  <li>TLS is the new progression of SSL</li>
  <li>Express.js can handle HTTPS <a href="/Slides/Week3/W3-4-https-passport.html">relatively simply</a></li>
  <li>Generally better to implement TLS in reverse-proxy such as Nginx (as implemented in jelastic)</li>
</ul>


    </section>
</div>

<!-- FOOTER  -->
<div id="footer_wrap" class="outer">
    <footer class="inner">
        
        <p class="copyright">Server Side Scripting Frameworks maintained by <a href="http://github.com/ilkkamtk">ilkkamtk</a></p>
        
        <p>Published with <a href="https://pages.github.com">GitHub Pages</a></p>
    </footer>
</div>


</body>
</html>